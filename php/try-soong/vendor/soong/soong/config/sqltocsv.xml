<?xml version="1.0"?>
<task>
    <sqltocsv_xml>
        <class>Soong\Task\EtlTask</class>
        <configuration>
            <extract>
                <class>Soong\Extractor\DBAL</class>
                <configuration>
                    <connection>
                        <dbname>etltemp</dbname>
                        <user>root</user>
                        <host>127.0.0.1</host>
                        <port>3306</port>
                        <driver>pdo_mysql</driver>
                    </connection>
                    <query>SELECT * FROM extractsource</query>
                    <key_properties>
                        <uniqueid>
                            <type>integer</type>
                        </uniqueid>
                    </key_properties>
                </configuration>
            </extract>
            <transform>
                <record_transformer>
                    <class>Soong\Transformer\Record\PropertyMapper</class>
                    <configuration>
                        <property_map>
                            <foo>foo</foo>
                            <bar>
                                <property_transformer>
                                    <class>Soong\Transformer\Property\UcFirst</class>
                                    <source_property>bar</source_property>
                                </property_transformer>
                            </bar>
                            <num>
                                <property_transformer_1>
                                    <class>Soong\Transformer\Property\Increment</class>
                                    <source_property>num</source_property>
                                </property_transformer_1>
                                <property_transformer_2>
                                    <class>Soong\Transformer\Property\Double</class>
                                </property_transformer_2>
                            </num>
                            <relation>related</relation>
                        </property_map>
                    </configuration>
                </record_transformer>
            </transform>
            <load>
                <class>Soong\Loader\Csv</class>
                <configuration>
                    <key_properties>
                        <id>
                            <type>integer</type>
                        </id>
                    </key_properties>
                    <properties>
                        <property_name_1>foo</property_name_1>
                        <property_name_2>bar</property_name_2>
                        <property_name_3>num</property_name_3>
                        <property_name_4>relation</property_name_4>
                        <property_name_5>id</property_name_5>
                    </properties>
                </configuration>
            </load>
        </configuration>
    </sqltocsv_xml>
</task>
